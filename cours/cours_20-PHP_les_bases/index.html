<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Cours 20 - PHP - Les bases</title>
        <meta name="description" content="">
        <meta name="author" content="Bruno Simon">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <link rel="stylesheet" href="../src/reveal.js/css/reveal.css">
        <link rel="stylesheet" href="../src/reveal.js/css/theme/orange.css" id="theme">
        <!-- <link rel="stylesheet" href="../src/reveal.js/lib/css/highlight/railscasts.css"> -->
        <!-- <link rel="stylesheet" href="../src/reveal.js/lib/css/highlight/github.css"> -->
        <link rel="stylesheet" href="../src/custom/style.css">
        <script>
            document.write( '<link rel="stylesheet" href="../src/reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>
        <!--[if lt IE 9]>
            <script src="../src/reveal.js/lib/js/html5shiv.js"></script>
        <![endif]-->

        <!-- Code steps start -->
        <link rel="stylesheet" href="../src/code-steps/prism-tomorrow.css">
        <link rel="stylesheet" href="../src/code-steps/style.css">
        <!-- Code steps end -->
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h3>H2 - P2023</h3>
                    <h1>D√©veloppement web</h1>
                    <h3>Cours 20</h3>
                    <ul>
                        <li>github : <a target="_blank" href="https://github.com/brunosimon/hetic-p2023">https://github.com/brunosimon/hetic-p2023</a></li>
                        <li>site : <a target="_blank" href="http://bruno-simon.com/hetic/p2023/">http://bruno-simon.com/hetic/p2023/</a></li>
                        <li>contact : <a target="_blank" mailto="bruno.simon@hetic.net">bruno.simon@hetic.net</a></li>
                    </ul>
                </section>

                <section>
                    <h3>PHP</h3>
                    <h1>Les bases</h1>
                </section>

                <section>
                    <p>Actuellement, les sites que l'on d√©veloppe sont <span class="hl">statiques</span></p>
                    <p>Tous les visiteurs obtiennent les m√™mes fichiers HTML/CSS/JS</p>
                    <p>C'est suffisant dans une certaine mesure, mais si on souhaite renvoyer des contenus diff√©rents selon diff√©rents crit√®res, cela pose probl√®me</p>
                </section>

                <section>
                    <p>Exemples de crit√®res :</p>
                    <ul>
                        <li>Position g√©ographique</li>
                        <li>Date</li>
                        <li>Utilisateur connect√© √† espace perso</li>
                        <li>Administrateur</li>
                        <li>Panier d'achat</li>
                        <li>Premi√®re visite</li>
                        <li>Etc.</li>
                    </ul>
                </section>

                <section>
                    <p>Nous allons avoir besoin de modifier les contenus <span class="u">avant</span> qu'ils soient envoy√©s √† l'utilisateur</p>
                    <p>C'est √† dire directement <span class="u">sur le serveur</span></p>
                    <p>Les visiteurs continueront d'obtenir du HTML/CSS/JS, mais celui-ci aura √©t√© pr√©alablement modifi√© par le serveur</p>
                </section>

                <section>
                    <p>‚òùÔ∏è Comme l'utilisateur ne r√©cup√®re que du HTML/CSS/JS, il n'a pas acc√®s au code effectu√© c√¥t√© serveur</p>
                </section>

                <section>
                    <p>Nous allons donc devoir apprendre un language serveur et il en existe plusieurs</p>
                    <ul>
                        <li>PHP</li>
                        <li>Ruby</li>
                        <li>Python</li>
                        <li>Java</li>
                        <li>Go</li>
                        <li>JS (ü§î)</li>
                        <li>Etc.</li>
                    </ul>
                    <p class="fragment">Nous allons commencer par PHP</p>
                </section>

                <section>
                    <h2>Raisons d'utiliser PHP</h2>
                    <ul>
                        <li>Tr√®s utilis√©</li>
                        <li>Grande communaut√©</li>
                        <li>Assez bonne documentation avec plein d'exemples</li>
                        <li>Plein de tutoriels</li>
                        <li>Mises √† jour r√©guli√®res</li>
                        <li>Facile d'acc√®s</li>
                        <li>Performant (‚òùÔ∏è pas le meilleur)</li>
                        <li>Robuste</li>
                        <li>Compatible avec beaucoup de serveurs faciles d'acc√®s</li>
                    </ul>
                </section>

                <section>
                    <h2>Raisons de ne pas utiliser</h2>
                    <ul>
                        <li>Beaucoup de code √† √©crire</li>
                        <li>Pas le plus performant</li>
                        <li>H√©ritage</li>
                        <li>Pas compatible avec tous les serveurs</li>
                        <li>Ne permet pas de tout faire</li>
                        <li>Permissif</li>
                        <li>Scope</li>
                    </ul>
                </section>

                <section>
                    <h2>Concr√®tement √ßa sert √† quoi ?</h2>
                    <p>Au final, le PHP va nous permettre de renvoyer du HTML, mais en faisant plein de choses avant</p>
                    <ul>
                        <li class="fragment">Communiquer avec une base de donn√©es</li>
                        <li class="fragment">Communiquer avec des APIs<br />(Facebook, Twitter, Instagram, Google, ...)</li>
                        <li class="fragment">Traiter des formulaires</li>
                        <li class="fragment">G√©rer des sessions</li>
                        <li class="fragment">S√©curiser des espaces</li>
                        <li class="fragment">etc.</li>
                    </ul>
                </section>

                <!-- <section>
                    <h2>Exemples plus concrets</h2>
                    <ul>
                        <li class="fragment">Aller chercher des articles dans une base de donn√©es puis les afficher dans la page</li>
                        <li class="fragment">Administrer ces articles dans un espace s√©curis√© (login, mot de passe)</li>
                        <li class="fragment">Aller chercher les derniers tweets de tel hashtag et les enregistrer dans la BDD</li>
                        <li class="fragment">Permettre √† des visiteurs de commenter un produit</li>
                        <li class="fragment">Permettre √† l'utilisateur d'enregistrer son mail pour lui envoyer des newsletter</li>
                        <li class="fragment">Permettre √† l'utilisateur d'effectuer un paiement</li>
                    </ul>
                </section> -->

                <section>
                    <h2>Fonctionnement</h2>
                    <p>Le logiciel <a target="_blank" href="http://fr.wikipedia.org/wiki/Apache_HTTP_Server">Apache Server</a> va permettre de lancer un serveur</p>
                    <p><span class="hl">Apache Server</span> va utiliser <span class="hl">PHP</span> pour interpr√©ter les fichier <span class="hl">.php</span></p>
                    <p>Il faudrait donc installer <span class="hl">Apache Server</span> et <span class="hl">PHP</span> sur nos ordinateurs</p>
                    <!-- <p>Heureusement, il existe des </p>
                    <p>Il faut donc installer Apache pour pouvoir faire du PHP que ce soit en local (sur votre ordinateur) ou en ligne (sur le serveur)</p>
                    <p>Lorsque l'utilisateur va acc√©der au site, Apache va <span class="highlight">parser</span> et <span class="highlight">ex√©cuter</span> le script PHP puis <span class="highlight">renvoyer</span> le r√©sultat √† l'utilisateur</p> -->
                </section>

                <section>
                    <p>Tout √ßa est compliqu√©, mais il existe des solutions relativement simples</p>
                    <p>PHP, dans ses derni√®res versions, int√®gre un serveur Apache minimalist</p>
                    <p>Nous allons donc simplement installer PHP</p>
                </section>

                <section>
                    <h2 class="default">MacOS</h2>
                    <p>Si vous √™tes sur MacOS 10.0.0 minimum (Mojave), vous n'avez rien √† faire car vous poss√©dez d√©j√† php</p>
                    <p>ü•≥</p>
                </section>

                <section>
                    <h2 class="default">Windows</h2>
                    <p>Sur Windows, il va falloir t√©l√©charger PHP, le mettre √† un endroit fixe sur l'ordiateur et cr√©er une variable syst√®me pointant sur ce dossier</p>
                    <p>üòí</p>
                </section>

                <section>
                    <p>T√©l√©chargez PHP via <a href="https://windows.php.net/downloads/releases/php-7.4.5-nts-Win32-vc15-x64.zip" target="_blank">ce lien</a> et d√©compressez l'archive (<span class="hl">clique droit</span>, <span class="hl">extraire vers ...</span>)</p>
                    <p><img src="src/img/windows-1.png"></p>
                </section>

                <section>
                    <p>Renommez le dossier <span class="hl">php-7.4.5</span></p>
                    <p><img src="src/img/windows-2.png"></p>
                </section>

                <section>
                    <p>D√©placez le dossier dans <span class="hl">C:</span></p>
                    <p><img src="src/img/windows-3.png"></p>
                </section>

                <section>
                    <p>Ouvrez le <span class="hl">Panneau de Configuration</span> (Control Panel)</p>
                    <p><img src="src/img/windows-4.png"></p>
                </section>

                <section>
                    <p>Cherchez le mot <span class="hl">variables</span></p>
                    <p><img src="src/img/windows-5.png"></p>
                </section>

                <section>
                    <p>Cliquez sur <span class="hl">Variables d'environnement...</span> (Environment Variables...)</p>
                    <p><img src="src/img/windows-6.png"></p>
                </section>

                <section>
                    <p>Dans la section du bas, selectionnez <span class="hl">Path</span> puis cliquez sur <span class="hl">Modifier...</span> (Edit...)</p>
                    <p><img src="src/img/windows-7.png"></p>
                </section>

                <section>
                    <p>
                        Ajoutez une variable en cliquant sur <span class="hl">Nouveau</span> (New) et nommez la <span class="hl">C:\php-7.4.5</span> (s'il s'agit de l'emplacement du dossier)
                        <br>
                        <img width="350" src="src/img/windows-8.png">
                    </p>
                    <p>
                        ‚ö†Ô∏è Sur certaines versions de windows, il faut ajouter <span class="hl">;C:\php-7.4.5</span>
                        <br>
                        <img width="450" src="src/img/windows-9.png">
                    </p>
                </section>

                <section>
                    <p>Faites <span class="hl">OK</span> pour valider et fermer toutes les fen√™tres et relancez votre terminal (qu'il s'agisse de l'invit de command ou de git bash)</p>
                </section>

                <section>
                    <h2 class="default">MacOS et Windows</h2>
                    <p>Pour tester si php est bien disponible, relancez votre terminal et tapez</p>
                    <div class="code-steps" data-type="bash" data-trim>
                        <pre contenteditable><code>
php -v
                        </code></pre>
                    </div>
                    <p><img src="src/img/terminal-php-1.png"></p>
                    <p>‚òùÔ∏è il se peut que la version soit l√©g√®rement diff√©rente, mais tant qu'elle est sup√©rieure √† 7, c'est bon</p>
                </section>

                <section>
                    <p>Maintenant que nous avons PHP disponible dans le terminal, nous allons pouvoir lancer un serveur</p>
                    <p>Cr√©ez un dossier l√† o√π vous avez l'habitude de coder</p>
                </section>

                <section>
                    <p>Cr√©ez un fichier <span class="hl">index.php</span> et ajoutez-y le code suivant</p>
                    <div class="code-steps" data-type="php" data-trim>
                        <pre contenteditable><code>
&lt;?php
    echo 'Hello World';
?&gt;
                        </code></pre>
                    </div>
                    <p>‚òùÔ∏è Nous expliquerons ce code plus tard</p>
                </section>

                <section>
                    <p>Allez dans ce dossier depuis le terminal</p>
                    <div class="code-steps" data-type="bash" data-trim>
                        <pre contenteditable><code>
cd /chemin/vers/mon/dossier
                        </code></pre>
                    </div>
                </section>

                <section>
                    <p>Lancez le serveur avec la commande suivante</p>
                    <div class="code-steps" data-type="bash" data-trim>
                        <pre contenteditable><code>
php -S localhost:8080
                        </code></pre>
                    </div>
                    <p>‚òùÔ∏è Tant que le serveur tourne, votre terminal ne sera plus utilisable</p>
                    <p>Pour l'arr√™ter, faites simple <span class="hl">CTRL + C</span></p>
                </section>

                <section>
                    <p>Vous pouvez tester le site √† l'adresse suivante</p>
                    <p><a href="http://localhost:8080">http://localhost:8080</a></p>
                    <p><img src="src/img/test-1.png"></p>
                    <p>ü•≥</p>
                </section>



                <!-- <section>
                    <p>Nous pourrions installer Apache ainsi que tout l'√©cosyst√®me manuellement, mais cela prendrait trop de temps</p>
                    <p>√Ä la place, nous allons utiliser la version gratuite du logiciel MAMP</p>
                    <p><a target="_blank" href="https://www.mamp.info/">https://www.mamp.info/</a> - MAMP (Mac / Windows)</p>
                </section>

                <section>
                    <p>Cliquez sur le bouton <span class="hl">Start Servers</span></p>
                    <p>
                        <img width="200" class="no-style" src="src/img/mamp-free-working.png" alt=""/>
                    </p>
                </section>

                <section>
                    <p>Le serveur est maintenant fonctionnel et pointe dans le dossier <span class="hl">htdocs/</span></p>
                    <p>
                        Mac : <span class="highlight">Applications/MAMP/htdocs/</span>
                        <br>Windows : <span class="highlight">C:\MAMP\htdocs\</span>
                    </p>
                    <p>Vous allez maintenant devoir d√©velopper dans vos sites dans ce dossier</p>
                </section> -->

                <section>
                    <h2>Explication</h2>
                    <p>La partie PHP est d√©limit√©e par <span class="highlight">&lt;?php</span> et <span class="highlight">?&gt;</span></p>
                    <p>Il est possible d'utiliser une version shortcut <span class="highlight">&lt;?</span> et <span class="highlight">?&gt;</span>, mais celle-ci ne fonctionne pas sur toutes les configurations</p>
                    <p><span class="highlight">echo</span> indique que le script doit renvoyer ce qui suit</p>
                    <p>Contrairement au JS, chaque instruction doit imp√©rativement se terminer par un <span class="highlight">;</span></p>
                    <div class="code-steps" data-type="php" data-trim>
                        <pre contenteditable><code>
&lt;?php
    echo 'Hello World';
?&gt;
                        </code></pre>
                    </div>
                </section>

                <section>
                    <p>Lorsqu'il n'y a que du PHP, il est inutile de fermer PHP</p>
                    <div class="code-steps" data-type="php" data-trim>
                        <pre contenteditable><code>
&lt;?php
    echo 'Hello World';
                        </code></pre>
                    </div>
                    <p>‚òùÔ∏è Cela peut m√™me nous √©viter des bugs, mais nous verrons cela plus tard</p>
                </section>

                <section>
                    <h2>Commenter votre code</h2>
                    <p>Les commentaires fonctionnent comme en JS</p>
                    <p>Plusieurs lignes entre <span class="highlight">/*</span> et <span class="highlight">*/</span></p>
                    <p>Une seule ligne pr√©c√©d√©e par <span class="highlight">//</span></p>
                    <div class="code-steps" data-type="php" data-trim>
                        <pre contenteditable><code>
&lt;?php
    /*
    Plusieurs lignes
    comme √ßa
    */
    echo 'Hello'

    // Une seule ligne comme √ßa
    echo 'World';
                        </code></pre>
                    </div>
                </section>

                <section>
                    <h2>HTML et PHP</h2>
                    <p>En dehors des balises PHP <span class="highlight">&lt;?php</span> et <span class="highlight">?&gt;</span> vous pouvez mettre du HTML</p>
                    <p>Si vous voulez mettre du PHP dans une page HTML pensez simplement √† changer l'extension de votre fichier de <span class="highlight">.html</span> √† <span class="highlight">.php</span></p>
                    <div class="code-steps" data-type="php" data-trim>
                        <pre contenteditable><code>
<h1>
    &lt;?php echo 'Hello World'; ?&gt;
</h1>
&lt;a href=&quot;#&quot;&gt;Mon lien&lt;/a&gt;
                        </code></pre>
                    </div>
                </section>

                <section>
                    <h2>Autres pages</h2>
                    <p>Si aucun fichier n'est sp√©cifi√© dans l'URL, le serveur va automatiquement charger <span class="hl">index.php</span></p>
                    <p>Si nous souhaitons cr√©er d'autres pages, il suffit de cr√©er de nouveaux fichiers tel que <span class="hl">contact.php</span></p>
                </section>
            </div>
        </div>

        <script src="../src/reveal.js/lib/js/head.min.js"></script>
        <script src="../src/reveal.js/js/reveal.js"></script>
        <script src="../src/custom/script.js"></script>

        <!-- Code steps start -->
        <script src="../src/code-steps/prism.js" data-manual></script>
        <!-- Code steps end -->

        <script type="module" src="../src/custom/script-module.js"></script>
    </body>
</html>
